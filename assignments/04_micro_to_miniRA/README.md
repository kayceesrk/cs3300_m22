---
layout: page
title: Assignment 04 - microIR to miniRA Translator
permalink: /assignments/micro_to_mini
---

| Release Date | 04/10/2022 |
| Deadline     | 23/10/2022, 23:59 hours |

<br/>

This assignment is the fourth part of a multi part project to 
write an optimizing compiler for Minijava. In this assignment, 
we start with programs in 
[microIR](https://github.com/kayceesrk/cs3300_m22/tree/main/assets) 
format and translate them to 
[miniRA](https://github.com/kayceesrk/cs3300_m22/tree/main/assets). 
Register Allocation must be carried out using the Linear Scan algorithm. 

Use JTB and JavaCC and write in Java one or more visitors which 
translate MicroIR programs to MiniRA form. 
Your main file should be called P4.java, 
if A.microIR contains a program to be register allocated then

```bash
$ javac P4.java
$ java P4 < A.microIR > A.RA
```

should create A.RA in miniRA form and is semantically equivalent to A.microIR. 
Note, your program must take input from standard input 
and write to standard output (so that we can use redirection).

To check that a program is in miniRA form, you could tie the miniRA.jj to build a parser. 
To ensure that your miniRA program is semantically equivalent to the MiniIR program, 
you can use the interpreter of miniRA [download](https://drive.google.com/file/d/1RJaJ66yK5God_6n69rpNNiJOPCLh4YQb/view)
to compare the output of A.microIR with the output of the 
miniRA program generated by your register allocator; 
say the generated miniRA code is stored in A.miniRA, 
then to invoke the interpreter use: java -jar kgi.jar < A.miniRA ]


Note: Please do not alter the directory structure of `RollN0_P4`. 
Only edit `GJDepthFirst.java` and `P4.java`
## Resources

The source files are on
[Github](https://github.com/kayceesrk/cs3300_m22/tree/main/assignments/04_micro_to_miniRA).

Get the source by cloning the entire repo:

```bash
$ git clone https://github.com/kayceesrk/cs3300_m22
```

If you have already cloned the repo, you can get the latest updates by:

```bash
$ cd cs3300_m22 # go to the cloned repo
$ git pull
```

The microIR grammar specification is 
[BNF-microIR](https://github.com/kayceesrk/cs3300_m22/tree/main/assets).

The miniRA grammar specification is 
[BNF-miniRA](https://github.com/kayceesrk/cs3300_m22/tree/main/assets).


## Submission

Rename the folder `RollN0_P4` with your roll number. For example, if your roll
number is `cs99b999`, then the folder should be named `cs99b999_P4`. Remove all
the `.class` files before submission. For example, you can do:

```bash
$ cd cs99b999_P4
$ find . -name "*.class" | xargs rm
```

Then produce the compressed gzip archive as follows:

```bash
$ tar cvzf cs99b999_P4.tar.gz cs99b999_P4
```

Submit the `.tar.gz` file. 

Note: You should thoroughly test your code. Some sample mini java programs are provided for testing. Create positive and negative tests per feature and test your code before submission. Please ensure that there are no compilation errors. If there are compilation errors, that code will yield zero marks.
